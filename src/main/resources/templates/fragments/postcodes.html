<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Renders the <ul> content for the lookup results -->
<ul th:fragment="items(list)">
  <li th:if="${#lists.isEmpty(list)}" class="lookup-item muted" tabindex="0">Geen resultaten</li>
  <li th:each="it : ${list}"
      class="lookup-item"
      tabindex="0"
      th:attr="data-id=${it.id},data-code=${it.code},data-name=${it.name}"
      th:text="${it.code} + ' â€” ' + ${it.name}"></li>
</ul>

<!-- Optional OOB selection payload; not actively used yet but endpoint returns this -->
<div th:fragment="selectionOob">
  <script hx-swap-oob="true">
    (function(){
      try {
        var ev = new CustomEvent('lookup:selected', { detail: { id: '[[${id}]]', code: '[[${code}]]', name: '[[${name}]]' } });
        window.dispatchEvent(ev);
      } catch(e) {}
    })();
  </script>
  <!-- Could include direct OOB DOM updates here if we assign stable IDs to inputs/spans -->
  <span hx-swap-oob="true" id="noop-oob" style="display:none"></span>
  <!-- noop element ensures valid HTML even if script tags are stripped by some proxies -->
</div>

</body>
</html>
